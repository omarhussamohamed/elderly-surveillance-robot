# DWA Local Planner Parameters
# Optimized for indoor 4WD skid-steer robot

DWAPlannerROS:
  # ========== ROBOT CONFIGURATION ==========
  
  # Robot velocity limits (must match hardware limits)
  max_vel_x: 0.25              # m/s - maximum forward velocity
  min_vel_x: -0.1              # m/s - maximum backward velocity (limited for safety)
  
  max_vel_y: 0.0               # m/s - no lateral movement (differential drive)
  min_vel_y: 0.0
  
  max_vel_trans: 0.25          # m/s - maximum translational velocity
  min_vel_trans: 0.05          # m/s - minimum to overcome friction
  
  max_vel_theta: 1.0           # rad/s - maximum rotational velocity
  min_vel_theta: 0.2           # rad/s - minimum rotation rate
  
  # Acceleration limits (conservative for indoor use)
  acc_lim_x: 0.5               # m/s^2 - linear acceleration
  acc_lim_y: 0.0               # no y acceleration
  acc_lim_theta: 1.5           # rad/s^2 - angular acceleration
  acc_lim_trans: 0.5           # m/s^2 - translational acceleration
  
  # Deceleration limits (can brake faster than accelerate)
  decel_lim_x: -1.0            # m/s^2
  decel_lim_theta: -2.0        # rad/s^2
  decel_lim_trans: -1.0        # m/s^2
  
  # ========== GOAL TOLERANCE ==========
  
  xy_goal_tolerance: 0.15      # meters - acceptable distance from goal
  yaw_goal_tolerance: 0.2      # radians - acceptable angle from goal orientation
  latch_xy_goal_tolerance: false
  
  # ========== TRAJECTORY SAMPLING ==========
  
  # Simulation time
  sim_time: 2.0                # seconds - how far to project trajectories
  sim_granularity: 0.05        # meters - resolution of trajectory
  
  # Velocity sampling
  vx_samples: 10               # number of linear velocity samples
  vy_samples: 0                # no y samples (differential drive)
  vtheta_samples: 20           # number of angular velocity samples
  
  # ========== TRAJECTORY SCORING ==========
  
  # Path distance bias (higher = stick closer to global plan)
  path_distance_bias: 32.0
  
  # Goal distance bias (higher = prefer getting closer to goal)
  goal_distance_bias: 20.0
  
  # Obstacle distance bias (higher = stay farther from obstacles)
  occdist_scale: 0.02
  
  # Forward preference (prefer moving forward)
  forward_point_distance: 0.325  # point on robot to check for progress
  
  # Twirling (penalize rotation in place)
  twirling_scale: 0.0
  
  # ========== OSCILLATION PREVENTION ==========
  
  oscillation_reset_dist: 0.05   # meters - distance to move before resetting oscillation flags
  oscillation_reset_angle: 0.2   # radians
  
  # ========== GLOBAL PLAN ==========
  
  prune_plan: true               # remove passed points from plan
  
  # ========== OBSTACLE AVOIDANCE ==========
  
  # Footprint model (match robot geometry)
  footprint_model:
    type: "polygon"
    vertices: [[-0.175, -0.125], [-0.175, 0.125], [0.175, 0.125], [0.175, -0.125]]
  
  # Obstacle avoidance
  max_obstacle_dist: 0.5         # maximum distance to consider obstacles
  include_costmap_obstacles: true
  costmap_obstacles_behind_robot_dist: 0.5
  obstacle_poses_affected: 30
  
  # Collision detection
  collision_detection: true
  
  # ========== RECOVERY ==========
  
  escape_reset_dist: 0.1
  escape_reset_theta: 0.1
  
  # ========== PERFORMANCE ==========
  
  controller_frequency: 10.0     # Hz - control loop frequency
  
  # ========== VISUALIZATION ==========
  
  publish_traj_pc: true          # publish trajectory point cloud
  publish_cost_grid_pc: false    # don't publish cost grid (performance)
  
  # ========== HOLONOMIC ROBOT ==========
  
  holonomic_robot: false         # skid-steer is non-holonomic


